<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--Icones Awsome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <!--API AXIOS-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--CDN para grafico de barras-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <!--Css Customizado-->
    <link rel="stylesheet" href="css/base.css">
    <link rel="shortcut icon" type="image/x-icon" href="img/siassVerde.png" />
    <title>SiAss</title>
    <!--JavaSchipt Customizado-->
    <script src="js/customJavaScript.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>
</head>

<body onload="loadListRep()">
    <header>
        <!--Inicio do navbar-->
        <nav class="navbar navbar-expand-lg navbar-light bg-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <div class="imgNav alinLogo">
                        <img src="img/siassVerde.png" class="img-responsive" alt="Logo da Siass">
                    </div>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="index.html">
                                <i class="fas fa-home"></i>Inicio
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-user"></i>
                                Artesãos
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="artesaosCadastrados.html">
                                    <i class="fas fa-list-ul"></i>
                                    Artesãos Cadastrados
                                </a>
                                <a class="dropdown-item" href="cadastroArtesao.html">
                                    <i class="fas fa-user-plus"></i>
                                    Cadastro de Artesãos
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="relatoriosArtesao.html">
                                    <i class="far fa-chart-bar"></i>
                                    Relatório de Artesãos</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-boxes"></i>
                                Produtos
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="cadastroProduto.html">
                                    <i class="fas fa-box-open"></i>
                                    Cadastrar Produto
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">
                                    <i class="far fa-chart-bar"></i>
                                    Relatório de Produtos</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-calendar-alt"></i>
                                Eventos
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="eventos.html">
                                    <i class="far fa-calendar-alt"></i>
                                    Cadastrar novo Evento
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">
                                    <i class="far fa-chart-bar"></i>
                                    Relatório de Eventos</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-dollar-sign"></i>
                                Movimentações

                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="movimentacoes.html">
                                    <i class="far fa-calendar-alt"></i>
                                    Entrada e Saída
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">
                                    <i class="far fa-chart-bar"></i>
                                    Dashboard</a>
                            </div>
                        </li>
                    </ul>
                    <form class="form-inline my-2 my-lg-0">
                        <input class="form-control mr-sm-2" type="search" placeholder=" Digite aqui para pesquisar..."
                            aria-label="Search">

                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
                            <i class="fas fa-search colorbtn"></i> Pesquisar</button>
                        <a href="login.html" class="sair">Sair</a>
                    </form>
                </div>
            </div>
        </nav>
    </header>
    <!--Inicio do container-->
    <div class="container">
        <div class="containerBody">
            <h2> Relatório Artesãos por Estado </h2>
            <hr>

            <div class="form-row">
                <div class="col-md-6 mb-3">
                    <canvas id="artesaoGBarUF" width="200" height="200"></canvas>
                    <script>
                        let url = 'http://localhost/artesao/countMG';
                        function count(url) {
                            var http;
                            var return__;
                            try {
                                http = new XMLHttpRequest();
                                //console.log(http);
                                //Inicializando uma requisição
                                http.open("GET", url, false);
                                http.onreadystatechange = function (e) {
                                    if (http.readyState === 4) {
                                        if (http.status === 200) {
                                            return__ = http.responseText;
                                            //console.log(return__);
                                        } else {
                                            console.log('error: ' + http.statusText);
                                        }
                                    }
                                };
                                http.send(null);
                                return return__;
                            }
                            catch (e) {
                                console.log(e);
                            }
                        }
                        let estadosCount = JSON.parse(count(url));
                        let AC = 0; let AL = 0; let AP = 0; let AM = 0; let BA = 0; let CE = 0; let DF = 0; let ES = 0; let GO = 0; let MA = 0; let MT = 0; let MS = 0; let MG = 0; let PA = 0;
                        let PB = 0; let PR = 0; let PE = 0; let PI = 0; let RJ = 0; let RN = 0; let RS = 0; let RO = 0; let RR = 0; let SC = 0; let SP; let SE; let TO;

                        for (let i = 0; i < estadosCount.length; i++) {

                            if (estadosCount[i]._id.uf == 'AC') {
                                AC = estadosCount[i].count
                                //console.log(AC + ' AC testando');
                            }
                            else if (estadosCount[i]._id.uf == 'AL') {
                                AL = estadosCount[i].count;
                                //console.log(AL + ' AL testando')
                            }
                            else if (estadosCount[i]._id.uf == 'AP') {
                                AP = estadosCount[i].count;
                                //console.log(AP + ' AP testando')
                            }
                            else if (estadosCount[i]._id.uf == 'AC') {
                                AC = estadosCount[i].count
                                //console.log(AC + ' AC testando');
                            }
                            else if (estadosCount[i]._id.uf == 'AL') {
                                AL = estadosCount[i].count;
                                //console.log(AL + ' AL testando')
                            }
                            else if (estadosCount[i]._id.uf == 'AP') {
                                AP = estadosCount[i].count;
                                //console.log(AP + ' AP testando')
                            }
                            else if (estadosCount[i]._id.uf == 'AM') {
                                AM = estadosCount[i].count;
                                //console.log(AL + ' AM testando')
                            }
                            else if (estadosCount[i]._id.uf == 'BA') {
                                BA = estadosCount[i].count;
                                //console.log(BA + ' BA testando')
                            }
                            else if (estadosCount[i]._id.uf == 'CE') {
                                CE = estadosCount[i].count;
                                //console.log(CE + ' CE testando')
                            }
                            else if (estadosCount[i]._id.uf == 'DF') {
                                DF = estadosCount[i].count;
                                //console.log(DF + ' DF testando')
                            }
                            else if (estadosCount[i]._id.uf == 'ES') {
                                ES = estadosCount[i].count;
                                //console.log(ES + ' ES testando')
                            }
                            else if (estadosCount[i]._id.uf == 'GO') {
                                GO = estadosCount[i].count;
                                //console.log(GO + ' GO testando')
                            }
                            else if (estadosCount[i]._id.uf == 'MA') {
                                MA = estadosCount[i].count;
                                //console.log(MA + ' MA testando')
                            }
                            else if (estadosCount[i]._id.uf == 'MT') {
                                MT = estadosCount[i].count;
                                //console.log(MT + ' MT testando')
                            }
                            else if (estadosCount[i]._id.uf == 'MS') {
                                MS = estadosCount[i].count;
                                //console.log(MS + ' MS testando')
                            }
                            else if (estadosCount[i]._id.uf == 'MG') {
                                MG = estadosCount[i].count;
                                //console.log(MG + ' MG testando')
                            }
                            else if (estadosCount[i]._id.uf == 'PA') {
                                PA = estadosCount[i].count;
                                //console.log(PA + ' PA testando')
                            }
                            else if (estadosCount[i]._id.uf == 'PB') {
                                PB = estadosCount[i].count;
                                //console.log(PB + ' PB testando')
                            }
                            else if (estadosCount[i]._id.uf == 'PR') {
                                PR = estadosCount[i].count;
                                //console.log(AL + ' PR testando')
                            }
                            else if (estadosCount[i]._id.uf == 'PE') {
                                PE = estadosCount[i].count;
                                //console.log(PE + ' PE testando')
                            }
                            else if (estadosCount[i]._id.uf == 'PI') {
                                PI = estadosCount[i].count;
                                //console.log(PI + ' PI testando')
                            }
                            else if (estadosCount[i]._id.uf == 'RJ') {
                                RJ = estadosCount[i].count;
                                //console.log(RJ + ' RJ testando')
                            }
                            else if (estadosCount[i]._id.uf == 'RN') {
                                RN = estadosCount[i].count;
                                //console.log(RN + ' RN testando')
                            }
                            else if (estadosCount[i]._id.uf == 'RS') {
                                RS = estadosCount[i].count;
                                //console.log(RS + ' RS testando')
                            }
                            else if (estadosCount[i]._id.uf == 'RO') {
                                RO = estadosCount[i].count;
                                //console.log(RO + ' RO testando')
                            }
                            else if (estadosCount[i]._id.uf == 'RR') {
                                RR = estadosCount[i].count;
                                //console.log(RR + ' RR testando')
                            }
                            else if (estadosCount[i]._id.uf == 'SC') {
                                SC = estadosCount[i].count;
                                //console.log(SC + ' SC testando')
                            }
                            else if (estadosCount[i]._id.uf == 'SP') {
                                SP = estadosCount[i].count;
                                //console.log(SP + ' SP testando')
                            }
                            else if (estadosCount[i]._id.uf == 'SE') {
                                SE = estadosCount[i].count;
                                //console.log(SE + ' SE testando')
                            }
                            else if (estadosCount[i]._id.uf == 'TO') {
                                TO = estadosCount[i].count;
                                //console.log(TO + ' TO testando')
                            }
                        }
                        let estados = [AC, AL, AP, AM, BA, CE, DF, ES, GO, MA, MT, MS, MG, PA,
                            PB, PR, PE, PI, RJ, RN, RS, RO, RR, SC, SP, SE, TO];

                        //Graficio Artesão
                        var ctx = document.getElementById("artesaoGBarUF");
                        var myChart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: ["AC", "AL", "AP", "AM", "BA", "CE", "DF", "ES", "GO", "MA", "MT", "MS", "MG", "PA", "PB", "PR", "PE", "PI", "RJ", "RN", "RS", "RO", "RR", "SC", "SP", "SE", "TO"],
                                datasets: [{
                                    label: 'Artesão por Estado',
                                    data: estados,
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 0.2)',
                                        'rgba(54, 162, 235, 0.2)',
                                        'rgba(255, 206, 86, 0.2)',
                                        'rgba(75, 192, 192, 0.2)',
                                        'rgba(153, 102, 255, 0.2)',
                                        'rgba(255, 159, 64, 0.2)',
                                        'rgba(25,25,112, 0.2)',
                                        'rgba(112,128,144, 0.2)',
                                        'rgba(0,0,0, 0.2)',
                                        'rgba(0,100,0, 0.2)',
                                        'rgba(255,222,173, 0.2)',
                                        'rgba(128,0,0, 0.2)',
                                        'rgba(250,128,114, 0.2)',
                                        'rgba(245,245,220, 0.2)',
                                        'rgba(216,191,216, 0.2)',
                                        'rgba(255,215,0, 0.2)',
                                        'rgba(255,99,71, 0.2)',
                                        'rgba(220,20,60, 0.2)',
                                        'rgba(255,20,147, 0.2)',
                                        'rgba(188,143,143, 0.2)',
                                        'rgba(85,107,47, 0.2)',
                                        'rgba(0,255,0, 0.2)',
                                        'rgba(47,79,79, 0.2)',
                                        'rgba(0,255,127, 0.2)',
                                        'rgba(0,0,139, 0.2)',
                                        'rgba(245,255,250, 0.2)',
                                        'rgba(255,69,0, 0.2)'
                                    ],
                                    borderColor: [
                                        'rgba(255,99,132,1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)',
                                        'rgba(135,206,250,1)',
                                        'rgba(46,139,87,1)',
                                        'rgba(50,205,50, 1)',
                                        'rgba(85,107,47, 1)',
                                        'rgba(139,69,19, 1)',
                                        'rgba(188,143,143, 1)',
                                        'rgba(245,222,179, 1)',
                                        'rgba(222,184,135, 1)',
                                        'rgba(147,112,219, 1)',
                                        'rgba(75,0,130, 1)',
                                        'rgba(128,0,128, 1)',
                                        'rgba(218,112,214, 1)',
                                        'rgba(199,21,133,1)',
                                        'rgba(220,20,60, 1)',
                                        'rgba(128,0,0, 1)',
                                        'rgba(165,42,42, 1)',
                                        'rgba(233,150,122, 1)',
                                        'rgba(255,127,80, 1)',
                                        'rgba(255,140,0,1)',
                                        'rgba(255,215,0, 1)',
                                        'rgba(255,255,0, 1)',
                                        'rgba(216,191,216, 1)',
                                        'rgba(175,238,238, 1)',
                                        'rgba(245,245,245, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }

                        });
                    </script>
                </div>
                <div class="col-md-6 mb-3">
                    <canvas id="graPie" width="200" height="200"></canvas>
                    <script>
                        new Chart(document.getElementById("graPie"), {
                            "type": "doughnut",
                            "data": {
                                "labels": ["AC", "AL", "AP", "AM", "BA", "CE", "DF", "ES", "GO", "MA", "MT", "MS", "MG", "PA", "PB", "PR", "PE", "PI", "RJ", "RN", "RS", "RO", "RR", "SC", "SP", "SE", "TO"],
                                "datasets": [{
                                    "label": "My First Dataset",
                                    "data": estados,
                                    "backgroundColor": [
                                        'rgba(255, 99, 132, 0.2)',
                                        'rgba(54, 162, 235, 0.2)',
                                        'rgba(255, 206, 86, 0.2)',
                                        'rgba(75, 192, 192, 0.2)',
                                        'rgba(153, 102, 255, 0.2)',
                                        'rgba(255, 159, 64, 0.2)',
                                        'rgba(25,25,112, 0.2)',
                                        'rgba(112,128,144, 0.2)',
                                        'rgba(0,0,0, 0.2)',
                                        'rgba(0,100,0, 0.2)',
                                        'rgba(255,222,173, 0.2)',
                                        'rgba(128,0,0, 0.2)',
                                        'rgba(250,128,114, 0.2)',
                                        'rgba(245,245,220, 0.2)',
                                        'rgba(216,191,216, 0.2)',
                                        'rgba(255,215,0, 0.2)',
                                        'rgba(255,99,71, 0.2)',
                                        'rgba(220,20,60, 0.2)',
                                        'rgba(255,20,147, 0.2)',
                                        'rgba(188,143,143, 0.2)',
                                        'rgba(85,107,47, 0.2)',
                                        'rgba(0,255,0, 0.2)',
                                        'rgba(47,79,79, 0.2)',
                                        'rgba(0,255,127, 0.2)',
                                        'rgba(0,0,139, 0.2)',
                                        'rgba(245,255,250, 0.2)',
                                        'rgba(255,69,0, 0.2)'
                                    ]
                                }]
                            }
                        });
                    </script>
                </div>


            </div>
            <div class="form-row">
                <div class="col-md-12 mb-3">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">E-mail</th>
                                    <th scope="col">Cidade</th>
                                    <th scope="col">Estado</th>
                                </tr>
                            </thead>
                            <tbody id="tabelaReport">

                            </tbody>
                        </table>
                    </div>
                </div>


</body>

</html>